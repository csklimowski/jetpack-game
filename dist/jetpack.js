"use strict";var _get=function t(e,a,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,a);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,a,i)}if("value"in s)return s.value;var n=s.get;return void 0!==n?n.call(i):void 0},_createClass=function(){function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var jetpack=function(){var t=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Phaser.State),_createClass(e,[{key:"preload",value:function(){u.add.text(315,300,"Loading...",{font:"30px monospace",fill:"#00ff00",align:"center"}).anchor.set(.5),u.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,u.scale.windowConstraints.bottom="layout",u.load.spritesheet("player","img/player.png",64,86),u.load.spritesheet("background","img/bg.png",630,2e3),u.load.spritesheet("hoverer","img/hoverer.png",96,120),u.load.spritesheet("gun","img/gun.png",67,40),u.load.spritesheet("blade","img/blade.png",68,175),u.load.spritesheet("eye","img/eye.png",40,40),u.load.spritesheet("shards","img/shards.png",48,48),u.load.spritesheet("bullet","img/bullet.png",30,20),u.load.spritesheet("lifebar","img/lifebar.png",60,36),u.load.spritesheet("triangle","img/triangle.png",40,40),u.load.spritesheet("combo","img/combo.png",60,40),u.load.spritesheet("pause","img/pause.png",60,60),u.load.spritesheet("begin","img/begin.png",100,40),u.load.spritesheet("credits","img/credits.png",136,40),u.load.spritesheet("sound-on","img/sound-on.png",169,40),u.load.spritesheet("sound-off","img/sound-off.png",187,40),u.load.spritesheet("sound-sfx-only","img/sound-sfx-only.png",274,40),u.load.spritesheet("return","img/return.png",117,40),u.load.image("tilt","img/tilt.png"),u.load.image("smoke","img/smoke.png"),u.load.image("fire","img/fire.png"),u.load.image("display","img/display.png"),u.load.audio("music","sfx/music.ogg"),u.load.audio("jetpack","sfx/jetpack.ogg"),u.load.audio("floodlights","sfx/floodlights.ogg"),u.load.audio("helicopter","sfx/helicopter.ogg"),u.load.audio("hit","sfx/hit.ogg"),u.load.audio("hurt","sfx/hurt.ogg"),u.load.audio("explosion","sfx/explosion.ogg"),u.load.audio("gun","sfx/gun.ogg"),u.load.audio("beep","sfx/beep.ogg"),u.load.audio("robot-1","sfx/robot-1.ogg"),u.load.audio("robot-2","sfx/robot-2.ogg"),u.load.audio("robot-3","sfx/robot-3.ogg"),u.load.audio("combo-1","sfx/combo-1.ogg"),u.load.audio("combo-2","sfx/combo-2.ogg"),u.load.audio("combo-3","sfx/combo-3.ogg"),u.load.audio("combo-4","sfx/combo-4.ogg"),u.load.bitmapFont("green","font/green.png","font/green.fnt"),u.load.bitmapFont("white","font/white.png","font/white.fnt")}},{key:"create",value:function(){if(u.sfx={music:u.add.audio("music",.7,!0),jetpack:u.add.audio("jetpack",.5,!0),floodlights:u.add.audio("floodlights",1,!1),helicopter:u.add.audio("helicopter",1.5,!0),hit:u.add.audio("hit",.8,!1),hurt:u.add.audio("hurt",1,!1),explosion:u.add.audio("explosion",1,!1),gun:u.add.audio("gun",1,!1),beep:u.add.audio("beep",.5,!0),robot:[u.add.audio("robot-1",.5,!1),u.add.audio("robot-2",.5,!1),u.add.audio("robot-3",.5,!1)],combo:[u.add.audio("combo-1",1,!1),u.add.audio("combo-2",1,!1),u.add.audio("combo-3",1,!1),u.add.audio("combo-4",1,!1)]},Cookies.get("blast_down_data")){var t=Cookies.get("blast_down_data");u.data=JSON.parse(t)}else u.data={highScore:0,soundSetting:0};0==u.data.soundSetting?u.sfx.music.play():1==u.data.soundSetting&&(u.sound.mute=!0),u.world.setBounds(0,0,630,2e3),u.state.start("menu"),console.log(" _ _ _ _ _ \n|  _|  _| |\n| |_  |   |\n|_ _|_|_ _|")}}]),e}(),e=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Phaser.State),_createClass(e,[{key:"create",value:function(){this.background=u.add.image(0,0,"background"),this.display=u.add.image(0,1080,"display"),u.camera.y=1e3;for(var t,e=["PERSONAL ","COMPACT ","BACK-MOUNTED ","PORTABLE ","SMALL-SCALE ","MINIATURE "],a=["FLYING ","LEVITATION ","HOVERING ","UN-FALLING ","AVIATION ","ASCENSION "],i=["APPARATUS","MACHINE","DEVICE","APPLIANCE","UTENSIL","CONTRAPTION"];30<(t=e[Math.floor(Math.random()*e.length)]+a[Math.floor(Math.random()*a.length)]+i[Math.floor(Math.random()*i.length)]).length;);var s=Math.floor(1e4*Math.random());this.soundOptions=[{image:"sound-on",text:"ON"},{image:"sound-off",text:"OFF"},{image:"sound-sfx-only",text:"SFX ONLY"}];var o=u.add.bitmapText(316,1210,"green",String.fromCharCode(9608),32);o.align="center",o.anchor.set(.5,0),o.finalText='CFD INTERNAL PROTOTYPE\n"JETTISON PACK"\n'+t+"\nTEST #"+s,o.fullText=o.finalText+"\n\n\n\nBEGIN\nCREDITS\nSOUND: "+this.soundOptions[u.data.soundSetting].text,o.progress=0,o.anchor.set(.5,0),u.time.events.repeat(40,o.fullText.length,this.updateText,this,o),u.sfx.beep.play()}},{key:"updateText",value:function(t){t.text=t.text.substring(0,t.text.length-1)+t.fullText.charAt(t.progress)+String.fromCharCode(9608),t.progress++,t.progress===t.fullText.length&&(u.sfx.beep.stop(),t.text=t.finalText,u.add.button(265,1485,"begin",this.startGame,this,1,0,1,0),u.add.button(247,1525,"credits",this.viewCredits,this,1,0,1,0),this.soundButton=u.add.button(315,1565,this.soundOptions[u.data.soundSetting].image,this.toggleSound,this,1,0,1,0),this.soundButton.anchor.set(.5,0))}},{key:"startGame",value:function(){u.state.start("main")}},{key:"viewCredits",value:function(){u.state.start("credits")}},{key:"toggleSound",value:function(){u.data.soundSetting=(u.data.soundSetting+1)%3,0==u.data.soundSetting?(this.soundButton.loadTexture("sound-on"),u.sfx.music.play()):1==u.data.soundSetting?(this.soundButton.loadTexture("sound-off"),u.sound.mute=!0,u.sfx.music.pause()):2==u.data.soundSetting&&(this.soundButton.loadTexture("sound-sfx-only"),u.sound.mute=!1,u.sfx.gun.play()),Cookies.set("blast_down_data",JSON.stringify(u.data),{expires:365})}}]),e}(),a=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u));return t.gravity=1600,t.minParticleSpeed.set(-600,-400),t.maxParticleSpeed.set(600,-1200),t.smoke=u.add.emitter(),t.smoke.gravity=-400,t.smoke.makeParticles("smoke"),t.smoke.setScale(.5,2,.5,2,1e3),t.smoke.setAlpha(1,0,2e3),t}return _inherits(e,Phaser.Particles.Arcade.Emitter),_createClass(e,[{key:"explodeEnemy",value:function(t,e,a){this.x=t,this.y=e,this.smoke.x=t,this.smoke.y=e,a?this.makeParticles("shards",[3,4,5]):this.makeParticles("shards",[0,1,2]),this.start(!0,2e3,null,5),this.smoke.start(!0,2e3,null,5)}},{key:"explodePlayer",value:function(t,e){this.x=t,this.y=e,this.smoke.x=t,this.smoke.y=e,this.makeParticles("shards",[6,7,8],3),this.start(!0,2e3,null,5),this.smoke.start(!0,2e3,null,5)}}]),e}(),n=function(t){function i(t,e){_classCallCheck(this,i);var a=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,u,0,0,"triangle"));return u.add.existing(a),e&&(a.frame=1),a.anchor.set(1,.5),a.pointTo=t,a}return _inherits(i,Phaser.Sprite),_createClass(i,[{key:"update",value:function(){this.x=Math.max(u.camera.x+20,Math.min(this.pointTo.x,u.camera.x+610)),this.y=Math.max(u.camera.y+20,Math.min(this.pointTo.y,u.camera.y+1100)),this.rotation=u.physics.arcade.angleBetween(this,this.pointTo),this.pointTo.x>u.camera.x&&this.pointTo.x<u.camera.x+630&&this.pointTo.y>u.camera.y&&this.pointTo.y<u.camera.y+1120?this.scale.set(0):this.scale.set(1)}}]),i}(),r=function(t){function o(t,e,a,i){_classCallCheck(this,o);var s=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,u));return s.x=t<315?-200:830,s.y=e,s.moving=i,s.moving?s.x+=s.x-t:u.add.tween(s).to({x:t},5*Math.abs(s.x-t)).start(),s.triangle=new n(s,!1),s.eye=u.add.sprite(0,0,"eye"),s.eye.anchor.set(.5),s.inverted=a,s.robody=u.add.sprite(0,0,"hoverer"),s.inverted?(s.robody.animations.add("hover",[4,5,6,7],30,!0),s.robody.anchor.set(.5,.6)):(s.robody.animations.add("hover",[0,1,2,3],30,!0),s.robody.anchor.set(.5,.4)),s.robody.animations.play("hover"),u.physics.arcade.enable(s.robody),s.robody.body.immovable=!0,s.robody.body.offset.set(16),s.robody.body.width=64,s.robody.body.height=88,s.add(s.eye),s.add(s.robody),s.enemyType=1,s}return _inherits(o,Phaser.Group),_createClass(o,[{key:"update",value:function(){this.moving&&(550<this.x?this.vx=-3:this.x<80&&(this.vx=3),this.x+=this.vx),this.dead?(this.inverted?this.y-=4:this.y+=4,this.angle+=2):this.y+=Math.sin(.005*u.time.now)}},{key:"destroy",value:function(){this.triangle.destroy(),_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"destroy",this).call(this)}}]),o}(),l=function(t){function o(t,e,a,i){_classCallCheck(this,o);var s=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,e,a,i));return s.bullet=u.add.sprite(0,0,"bullet"),s.bullet.anchor.set(.5),s.bullet.animations.add("buzz",[0,1,2],30,!0),s.bullet.animations.play("buzz"),u.physics.arcade.enable(s.bullet),s.bullet.body.immovable=!0,s.gun=u.add.sprite(0,0,"gun"),s.gun.anchor.set(0,.5),s.inverted?(s.gun.frame=0,s.gun.animations.add("fire",[1,2,3,4,5,0],20,!1)):(s.gun.frame=6,s.gun.animations.add("fire",[7,8,9,10,11,6],20,!1)),s.add(s.gun),s.enemyType=3,u.time.events.add(1e3*Math.random(),function(){this.fireLoop=u.time.events.loop(2e3,this.fire,this)},s),s}return _inherits(o,r),_createClass(o,[{key:"fire",value:function(){u.sfx.gun.play(),this.gun.animations.play("fire"),this.bullet.x=this.x+60*Math.cos(this.gun.rotation),this.bullet.y=this.y+60*Math.sin(this.gun.rotation),this.bullet.rotation=this.gun.rotation,this.bullet.body.velocity.x=700*Math.cos(this.gun.rotation),this.bullet.body.velocity.y=700*Math.sin(this.gun.rotation)}}]),o}(),i=function(t){function i(t,e){_classCallCheck(this,i);var a=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,u,t,e,"player"));return u.add.existing(a),a.animations.add("up-down",[1,2,4,5,6],30,!1),a.animations.add("down-up",[5,4,2,1,0],30,!1),a.anchor.set(.5),a.weight=200,a.health=4,a.invincible=!1,a.jet=u.add.emitter(0,0),a.jet.makeParticles("fire"),a.jet.gravity=-400,a.jet.minParticleSpeed.set(-100,0),a.jet.maxParticleSpeed.set(100,0),a.jet.setScale(1,.5,1,.5,1e3),a.jet.setAlpha(1,0,2e3),a.jet.start(!1,500,15),a.jet.on=!1,a.triangle=new n(a,!0),u.physics.arcade.enable(a),window.addEventListener("deviceorientation",a.onTilt.bind(a),!0),a}return _inherits(i,Phaser.Sprite),_createClass(i,[{key:"update",value:function(){1720<=this.body.y&&!this.dead?this.body.velocity.y+=.1*(this.weight-2e3):(this.body.velocity.y+=.2*this.weight,1720<=this.ly&&!this.dead&&(this.animations.play("down-up"),this.body.velocity.y<-1e3&&(this.body.velocity.y*=.8))),this.lvy<=0&&0<this.body.velocity.y&&6!=this.frame&&!this.dead&&this.animations.play("up-down"),this.body.x<-10?(this.body.x=-10,this.body.velocity.x*=-1):580<this.body.x&&(this.body.x=580,this.body.velocity.x*=-1),this.dead&&(this.angle-=1),this.jet.x=this.body.x+30,this.jet.y=this.body.y+10,this.ly=this.body.y,this.lvy=this.body.velocity.y}},{key:"onTilt",value:function(t){var e=void 0;t.gamma<0?(e=Math.max(50*t.gamma,-700),this.scale.x=-1):(e=Math.min(50*t.gamma,700),this.scale.x=1),this.body.velocity.x+=.2*(e-this.body.velocity.x)}},{key:"vincible",value:function(){this.invincible=!1,this.alpha=1}},{key:"jetpackOn",value:function(){u.paused||this.dead||(u.sfx.jetpack.play(),this.jet.on=!0,this.weight=500)}},{key:"jetpackOff",value:function(){u.sfx.jetpack.stop(),this.jet.on=!1,this.weight=200}}]),i}(),h=function(t){function o(t,e,a,i){_classCallCheck(this,o);var s=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,e,a,i));return s.blade=u.add.sprite(0,0,"blade"),s.blade.anchor.set(.5,1),s.inverted?s.blade.animations.add("spin",[5,4,3],30,!0):s.blade.animations.add("spin",[2,1,0],30,!0),s.blade.angle=360*Math.random(),s.blade.animations.play("spin"),u.physics.arcade.enable(s.blade),s.blade.body.width=40,s.blade.body.height=40,s.add(s.blade),s.enemyType=2,s}return _inherits(o,r),_createClass(o,[{key:"update",value:function(){_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"update",this).call(this),this.blade.angle+=1,this.blade.body.offset.x=140*Math.sin(this.blade.rotation)+10,this.blade.body.offset.y=140*-Math.cos(this.blade.rotation)+160}}]),o}(),s=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u,-100,-100,"combo"));return u.add.existing(t),t.animations.add("2",[0,1],10,!0),t.animations.add("3",[2,3],10,!0),t.animations.add("4",[4,5],10,!0),t.animations.add("5",[6,7],10,!0),t.anchor.set(.5),t}return _inherits(e,Phaser.Sprite),_createClass(e,[{key:"update",value:function(){this.y-=1,this.alpha-=.01}},{key:"appear",value:function(t,e,a){this.x=t,this.y=e,this.alpha=1,a=Math.min(a,5),this.animations.play(""+a),u.sfx.combo[a-2].play()}}]),e}(),o=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Phaser.State),_createClass(e,[{key:"create",value:function(){u.physics.startSystem(Phaser.Physics.ARCADE),this.background=u.add.image(0,0,"background"),this.graphics=u.add.graphics(0,0),this.exploder=new a,this.shakeProgress=40,this.enemies=u.add.group(),this.player=new i(315,1400),this.comboText=new s,this.multiplier=0,this.lastWasInverted=!1,this.noBotsHit=!0,u.score=0,this.visibleScore=0,this.scoreDisplay=u.add.bitmapText(550,5,"white","0"),this.scoreDisplay.anchor.set(1,0),this.lifebar=u.add.sprite(560,10,"lifebar"),this.pauseButton=u.add.sprite(0,0,"pause"),this.display=u.add.sprite(0,1080,"display"),u.add.tween(this.display).to({x:630},500).start(),u.input.keyboard.addKey(Phaser.KeyCode.ESC).onDown.add(this.pauseGame,this),u.input.onDown.add(this.onInputDown,this),u.input.onUp.add(this.player.jetpackOff,this.player),this.level=1,this.awaitingNewWave=!0,u.time.events.add(1e3,this.lightsOn,this)}},{key:"update",value:function(){u.camera.y=this.player.body.y-400,this.visibleScore<u.score?this.visibleScore=Math.min(this.visibleScore+.3,u.score):u.sfx.beep.stop(),this.scoreDisplay.y=u.camera.y+12,this.scoreDisplay.text=Math.floor(this.visibleScore),this.lifebar.y=u.camera.y+10,this.pauseButton.y=u.camera.y,0!=this.enemies.length||this.awaitingNewWave||(u.sfx.helicopter.stop(),u.time.events.add(2e3,this.newWave,this),this.awaitingNewWave=!0),this.enemies.forEach(this.updateEnemy,this),this.graphics.clear(),this.graphics.lineStyle(4,0,1),this.graphics.moveTo(0,1800),1720<=this.player.body.y&&!this.player.dead?this.graphics.lineTo(this.player.body.x+40,this.player.body.y+80):1720<=this.player.ly&&(this.noBotsHit?this.multiplier=0:this.noBotsHit=!0),this.graphics.lineTo(630,1800),u.camera.y=u.camera.y+Math.max(0,40-this.shakeProgress)*Math.sin(this.shakeProgress),this.shakeProgress+=2.5}},{key:"lightsOn",value:function(){u.sfx.floodlights.play(),this.background.frame=1,this.tutorial=u.add.sprite(315,1150,"tilt"),this.tutorial.anchor.set(.5),u.input.onDown.addOnce(function(){this.awaitingNewWave=!1,u.add.tween(this.tutorial).to({alpha:0},1e3).start()},this)}},{key:"onInputDown",value:function(t){t.x<=60&&t.y<=60?this.pauseGame():this.player.jetpackOn()}},{key:"pauseGame",value:function(){u.paused=!u.paused,u.paused?this.pauseButton.frame=1:this.pauseButton.frame=0}},{key:"updateEnemy",value:function(t){t.eye.rotation=u.physics.arcade.angleBetween(t,this.player),this.player.dead||(u.physics.arcade.overlap(this.player,t.robody,this.playerHits,null,this),2==t.enemyType&&(this.player.invincible||t.dead||u.physics.arcade.overlap(this.player,t.blade,this.takeDamage,null,this)),3==t.enemyType&&(t.gun.rotation=u.physics.arcade.angleBetween(t,this.player),this.player.invincible||u.physics.arcade.overlap(this.player,t.bullet,this.takeDamage,null,this)))}},{key:"playerHits",value:function(t,e){e.parent.inverted?t.lvy<-600&&!e.parent.dead?(3==e.parent.enemyType&&u.time.events.remove(e.parent.fireLoop),u.sfx.hit.play(),u.sfx.robot[Math.floor(3*Math.random())].play(),t.body.velocity.y=0,e.parent.eye.frame=1,e.parent.dead=!0,u.time.events.add(500,this.robotExplodes,this,e)):(0<t.lvy&&t.y<e.parent.y-60&&this.takeDamage(),u.physics.arcade.collide(t,e)):600<t.lvy&&!e.parent.dead?(3==e.parent.enemyType&&u.time.events.remove(e.parent.fireLoop),u.sfx.hit.play(),u.sfx.robot[Math.floor(3*Math.random())].play(),t.body.velocity.y*=-.4,e.parent.eye.frame=1,e.parent.dead=!0,u.time.events.add(500,this.robotExplodes,this,e)):(t.lvy<50&&t.y>e.parent.y+60&&this.takeDamage(),u.physics.arcade.collide(t,e))}},{key:"takeDamage",value:function(){this.player.invincible||(this.player.health--,this.lifebar.frame++,this.player.health<=0?(u.sfx.explosion.play(),this.player.jetpackOff(),this.exploder.explodePlayer(this.player.x,this.player.y),this.shakeProgress=0,this.player.frame=3,this.player.dead=!0,this.player.triangle.destroy(),u.time.events.add(3e3,u.state.start,u.state,"results")):(u.sfx.hurt.play(),this.player.invincible=!0,this.player.body.velocity.x=0,this.player.body.velocity.y=0,this.player.alpha=.5,u.time.events.add(1e3,this.player.vincible,this.player)))}},{key:"robotExplodes",value:function(t){t.parent&&(u.sfx.explosion.play(),u.sfx.beep.play(),this.shakeProgress=0,this.exploder.explodeEnemy(t.parent.x,t.parent.y,t.parent.inverted),this.player.body.velocity.y+=1600*Math.sin(u.physics.arcade.angleBetween(t.parent,this.player)),this.player.body.velocity.x+=2400*Math.cos(u.physics.arcade.angleBetween(t.parent,this.player)),!this.noBotsHit||t.parent.inverted||this.lastWasInverted?this.multiplier++:this.multiplier=1,2<=this.multiplier&&this.comboText.appear(t.parent.x,t.parent.y,this.multiplier),this.noBotsHit=!1,this.lastWasInverted=t.parent.inverted,1==t.parent.enemyType?u.score+=10*this.multiplier:2==t.parent.enemyType?u.score+=20*this.multiplier:3==t.parent.enemyType&&(u.score+=40*this.multiplier),t.parent.destroy())}},{key:"newWave",value:function(){for(var t=this.level,e=[700,900,1100,1300,1500],a=[60,180,315,450,570];0<t;){var i,s=a.splice(Math.floor(Math.random()*a.length),1)[0],o=e.splice(Math.floor(Math.random()*e.length),1)[0],n=Math.floor(Math.random()*Math.min(t,6))+2;if(2==n?i=new r(s,o,!1,.5<Math.random()):3==n?i=new r(s,o,!0,.5<Math.random()):4==n?i=new h(s,o,!1,.5<Math.random()):5==n?i=new h(s,o,!0,.5<Math.random()):6==n?i=new l(s,o,!1,.5<Math.random()):7==n&&(i=new l(s,o,!0,.5<Math.random())),this.enemies.add(i),t-=n,e.length<=0)break}u.sfx.helicopter.play(),this.awaitingNewWave=!1,this.level++}}]),e}(),d=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Phaser.State),_createClass(e,[{key:"create",value:function(){u.sfx.helicopter.stop(),this.background=u.add.image(0,0,"background",1),this.display=u.add.image(0,1080,"display"),this.camera.y=1e3;for(var t=u.add.bitmapText(316,1210,"green",String.fromCharCode(9608),32),e=void 0,a=void 0,i=["TRAGIC ","UNFORTUNATE ","CATASTROPHIC ","UNFORESEEN ","MINOR ","REGRETTABLE "],s=["AI ","ROBOTIC ","AUTOMATON ","EQUIPMENT ","TECHNOLOGICAL ","PROGRAMMING "],o=["FAILURE","MISTAKE","MISHAP","COMPLICATION","ACCIDENT","BUG"];30<(e=i[Math.floor(Math.random()*i.length)]+s[Math.floor(Math.random()*s.length)]+o[Math.floor(Math.random()*o.length)]).length;);a=u.score>u.data.highScore?(u.data.highScore=u.score,Cookies.set("blast_down_data",JSON.stringify(u.data),{expires:365}),"NEW PERSONAL BEST!"):"YOUR BEST: "+u.data.highScore,t.finalText="TEST TERMINATED\n\nREASON:\n"+e+"\n\nSCORE: "+u.score+"\n"+a,t.fullText=t.finalText+"\n\n\nRETURN",t.align="center",t.progress=0,t.anchor.set(.5,0),u.time.events.repeat(40,t.fullText.length,this.updateText,this,t),u.sfx.beep.play()}},{key:"updateText",value:function(t){t.text=t.text.substring(0,t.text.length-1)+t.fullText.charAt(t.progress)+String.fromCharCode(9608),t.progress++,t.progress==t.fullText.length&&(u.sfx.beep.stop(),t.text=t.finalText,u.add.button(264,1566,"return",this.return,this,1,0,1,0))}},{key:"return",value:function(){u.state.start("menu")}}]),e}(),p=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Phaser.State),_createClass(e,[{key:"create",value:function(){this.background=u.add.image(0,0,"background"),this.display=u.add.image(0,1080,"display"),this.camera.y=1e3;var t=u.add.bitmapText(316,1210,"green",String.fromCharCode(9608),32);t.finalText="DESIGN, PROGRAMMING, ART\nCHRIS KLIMOWSKI\n\nMUSIC\nINCOMPETECH\n\nSOUND EFFECTS\nFREESOUND.ORG",t.fullText=t.finalText+"\n\nRETURN",t.align="center",t.progress=0,t.anchor.set(.5,0),u.time.events.repeat(40,t.fullText.length,this.updateText,this,t),u.sfx.beep.play()}},{key:"updateText",value:function(t){t.text=t.text.substring(0,t.text.length-1)+t.fullText.charAt(t.progress)+String.fromCharCode(9608),t.progress++,t.progress==t.fullText.length&&(u.sfx.beep.stop(),t.text=t.finalText,u.add.button(264,1566,"return",this.return,this,1,0,1,0))}},{key:"return",value:function(){u.state.start("menu")}}]),e}(),u=new Phaser.Game(630,1120,Phaser.AUTO,"game");return u.state.add("load",t),u.state.add("main",o),u.state.add("menu",e),u.state.add("credits",p),u.state.add("results",d),u.state.start("load"),u}();